!function r(e,t,a){function i(o,h){if(!t[o]){if(!e[o]){var s="function"==typeof require&&require;if(!h&&s)return s(o,!0);if(n)return n(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=t[o]={exports:{}};e[o][0].call(u.exports,function(r){var t=e[o][1][r];return i(t||r)},u,u.exports,r,e,t,a)}return t[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(r,e,t){"use strict";(0,function(r){return r&&r.__esModule?r:{default:r}}(r("./module/firework")).default)()},{"./module/firework":2}],2:[function(r,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function r(){this.reset(),this.shards=[];for(var r=0;r<l;++r)this.shards.push(new e(this))}function e(r){this.parent=r}function t(){window.requestAnimationFrame(t),o.clear(),++d,s.length<h.fireworks&&s.push(new r),s.map(function(r){r.step()}),o.draw(a.LINES)}var a=canvas.getContext("webgl",{preserveDrawingBuffer:!0}),i=canvas.width=window.innerWidth,n=canvas.height=380,o={},h={projectileAlpha:.8,projectileLineWidth:1.3,fireworkAngleSpan:.5,baseFireworkVel:4,addedFireworkVel:3,gravity:.03,lowVelBoundary:-.2,xFriction:.995,baseShardVel:1,addedShardVel:.2,fireworks:200,baseShardsParFirework:10,addedShardsParFirework:10,shardFireworkVelMultiplier:.3,initHueMultiplier:1/360,runHueAdder:.1/360};o.vertexShaderSource="\nuniform int u_mode;\nuniform vec2 u_res;\nattribute vec4 a_data;\nvarying vec4 v_color;\n\nvec3 h2rgb( float h ){\n  return clamp( abs( mod( h * 6. + vec3( 0, 4, 2 ), 6. ) - 3. ) -1., 0., 1. );\n}\nvoid clear(){\n  gl_Position = vec4( a_data.xy, 0, 1 );\n  v_color = vec4( 0, 0, 0, a_data.w );\n}\nvoid draw(){\n  gl_Position = vec4( vec2( 1, -1 ) * ( ( a_data.xy / u_res ) * 2. - 1. ), 0, 1 );\n  v_color = vec4( h2rgb( a_data.z ), a_data.w );\n}\nvoid main(){\n  if( u_mode == 0 )\n    draw();\n  else\n    clear();\n}\n",o.fragmentShaderSource="\nprecision mediump float;\nvarying vec4 v_color;\n\nvoid main(){\n  gl_FragColor = v_color;\n}\n",o.vertexShader=a.createShader(a.VERTEX_SHADER),a.shaderSource(o.vertexShader,o.vertexShaderSource),a.compileShader(o.vertexShader),o.fragmentShader=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(o.fragmentShader,o.fragmentShaderSource),a.compileShader(o.fragmentShader),o.shaderProgram=a.createProgram(),a.attachShader(o.shaderProgram,o.vertexShader),a.attachShader(o.shaderProgram,o.fragmentShader),a.linkProgram(o.shaderProgram),a.useProgram(o.shaderProgram),o.dataAttribLoc=a.getAttribLocation(o.shaderProgram,"a_data"),o.dataBuffer=a.createBuffer(),a.enableVertexAttribArray(o.dataAttribLoc),a.bindBuffer(a.ARRAY_BUFFER,o.dataBuffer),a.vertexAttribPointer(o.dataAttribLoc,4,a.FLOAT,!1,0,0),o.resUniformLoc=a.getUniformLocation(o.shaderProgram,"u_res"),o.modeUniformLoc=a.getUniformLocation(o.shaderProgram,"u_mode"),a.viewport(0,0,i,n),a.uniform2f(o.resUniformLoc,i,n),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),a.enable(a.BLEND),a.lineWidth(h.projectileLineWidth),o.data=[],o.clear=function(){a.uniform1i(o.modeUniformLoc,1);var r=.1;o.data=[-1,-1,0,r,1,-1,0,r,-1,1,0,r,-1,1,0,r,1,-1,0,r,1,1,0,r],o.draw(a.TRIANGLES),a.uniform1i(o.modeUniformLoc,0),o.data.length=0},o.draw=function(r){a.bufferData(a.ARRAY_BUFFER,new Float32Array(o.data),a.STATIC_DRAW),a.drawArrays(r,0,o.data.length/4)};for(var s=[],d=0,u=[],c=[],l=h.baseShardsParFirework+h.addedShardsParFirework,f=6.283185307179586,v=0;v<l;++v)u[v]=Math.sin(f*v/l),c[v]=Math.cos(f*v/l);r.prototype.reset=function(){var r=-Math.PI/2+(Math.random()-.5)*h.fireworkAngleSpan,e=h.baseFireworkVel+h.addedFireworkVel*Math.random();this.mode=0,this.vx=e*Math.cos(r),this.vy=e*Math.sin(r),this.x=Math.random()*i,this.y=n,this.hue=d*h.initHueMultiplier},r.prototype.step=function(){if(0===this.mode){var r=this.hue,e=this.x,t=this.y;if(this.hue+=h.runHueAdder,this.x+=this.vx*=h.xFriction,this.y+=this.vy+=h.gravity,o.data.push(e,t,r,.2*h.projectileAlpha,this.x,this.y,this.hue,.2*h.projectileAlpha),this.vy>=h.lowVelBoundary){this.mode=1,this.shardAmount=h.baseShardsParFirework+h.addedShardsParFirework*Math.random()|0;for(var a=Math.random()*f,i=Math.cos(a),n=Math.sin(a),s=u[this.shardAmount],d=c[this.shardAmount],l=0;l<this.shardAmount;++l){var v=h.baseShardVel+h.addedShardVel*Math.random();this.shards[l].reset(i*v,n*v);var m=i;i=i*d-n*s,n=n*d+m*s}}}else if(1===this.mode){this.ph=this.hue,this.hue+=h.runHueAdder;for(var p=!0,l=0;l<this.shardAmount;++l){var w=this.shards[l];w.dead||(w.step(),p=!1)}p&&this.reset()}},e.prototype.reset=function(r,e){this.x=this.parent.x,this.y=this.parent.y,this.vx=this.parent.vx*h.shardFireworkVelMultiplier+r,this.vy=this.parent.vy*h.shardFireworkVelMultiplier+e,this.starty=this.y,this.dead=!1,this.tick=1},e.prototype.step=function(){this.tick+=.05;var r=this.x,e=this.y;this.x+=this.vx*=h.xFriction,this.y+=this.vy+=h.gravity;this.y,this.starty,this.starty;o.data.push(r,e,this.parent.ph,h.projectileAlpha/this.tick,this.x,this.y,this.parent.hue,h.projectileAlpha/this.tick),this.y>n&&(this.dead=!0)},t(),window.addEventListener("resize",function(){i=canvas.width=window.innerWidth,n=canvas.height=380,a.viewport(0,0,i,n),a.uniform2f(o.resUniformLoc,i,n)}),window.addEventListener("click",function(e){var t=new r;t.x=e.clientX,t.y=e.clientY,t.vx=0,t.vy=0,s.push(t)})}},{}]},{},[1]);